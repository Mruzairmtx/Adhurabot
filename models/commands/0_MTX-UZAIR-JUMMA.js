const request = require('request');
const fs = require('fs');
const path = require('path');

module.exports.config = {
    name: "jumma",
    version: "1.0.1",
    hasPermssion: 0,
    credits: "uzairrajput",
    description: "no prefix",
  usePrefix: false,
    commandCategory: "No command marks needed",
    usages: "Yo Yo",
    cooldowns: 5,
};

const gifs = [
    "https://i.imgur.com/CnSuFaC.jpeg",
    "https://i.imgur.com/8DF92PC.jpeg",
    "https://i.imgur.com/cFPyPip.jpeg",
    "https://i.imgur.com/x0t9HN2.jpeg",
    "https://i.imgur.com/w9ADBfp.jpeg",
    "https://i.imgur.com/KsLQwIy.jpeg",
    "https://i.imgur.com/sLdQwwb.gif",
    "https://i.imgur.com/6L3FeJ1.gif",
    "https://i.imgur.com/FKoqNS9.mp4"
];

const messages = [
    "ğ‘­ğ‘¹ğ‘°ğ‘«ğ‘¨ğ’€ ğ‘¨ğ‘³ğ‘³ğ‘¨ğ‘¯ ğ‘¨ğ‘ªğ‘ªğ‘¬ğ‘·ğ‘» ğ‘¬ğ‘½ğ‘¬ğ‘¹ğ’€ ğ‘³ğ‘°ğ‘»ğ‘»ğ‘³ğ‘¬ ğ‘«ğ‘¼ğ‘¨ ğ‘¾ğ‘¬ ğ‘´ğ‘¨ğ‘²ğ‘¬ ğ‘¶ğ‘µ ğ‘»ğ‘¯ğ‘°ğ‘º ğ‘©ğ‘³ğ‘¨ğ‘ºğ‘ºğ‘¬ğ‘« ğ‘©ğ‘³ğ‘¨ğ‘ºğ‘ºğ‘¬ğ‘« ğ‘«ğ‘¨ğ’€,\n\nâ—ˆâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”ğŸ’šâœ¨\n\n {name}à¥¤ \n\nğ‘´ğ‘¨ğ‘«ğ‘¬ ğ‘©ğ’€\n\nâ—ˆâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”ğŸ’šâœ¨\n\nğ‘´ğ’“ğ‘¼ğ’›ğ’‚ğ’Šğ’“ğ‘¿ğ’™ğ‘¿-ğ‘´ğ‘»ğ‘¿ â—ˆ â”€â”€â”€â”€ ğŸ’šâœ¨",
    "ğŸŒºğ‘±ğ‘¼ğ‘´ğ‘´ğ‘¨ ğ‘´ğ‘¼ğ‘©ğ‘¨ğ‘¹ğ‘¨ğ‘²ğŸŒº ğ‘¨ğ‘®ğ‘¨ğ‘¹ ğ‘¨ğ‘³ğ‘³ğ‘¨ğ‘¯ ğ‘·ğ‘¨ğ‘¹ ğ‘©ğ‘¨ğ‘¯ğ‘¹ğ‘¶ğ‘ºğ‘¨ ğ‘²ğ‘¨ğ‘¹ğ‘µğ‘¨ ğ‘ºğ‘°ğ‘²ğ‘¯ğ‘µğ‘¨ ğ‘¯ğ‘¶ ğ‘»ğ‘¾ ğ‘·ğ‘¨ğ‘¹ğ‘¬ğ‘µğ‘«ğ‘¶ ğ‘ºğ‘°ğ‘²ğ‘¯ğ‘¶..\n\nğ‘²ğ‘¬ ğ‘±ğ‘¨ğ‘© ğ‘¾ğ‘¶ ğ‘ºğ‘¯ğ‘¨ğ‘´ ğ‘²ğ‘¶ ğ‘®ğ‘¯ğ‘¨ğ‘¹ ğ‘±ğ‘¨ğ‘»ğ‘¬ ğ‘¯ğ‘¨ğ‘° ğ‘»ğ‘¾ ğ‘¼ğ‘µğ‘²ğ‘° ğ‘ªğ‘¯ğ‘¶ğ‘µğ‘ªğ‘¯ ğ‘´ğ‘¬ ğ‘²ğ‘¨ğ‘³ ğ‘²ğ‘¬ ğ‘³ğ‘°ğ’€ğ‘¬ ğ‘²ğ‘°ğ‘¶.ğ‘«ğ‘¨ğ‘µğ‘¨ ğ‘µğ‘¨ğ‘¯ğ‘° ğ‘¯ğ‘¶ğ‘»ğ‘¨\n\nâ—ˆâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”ğŸ’šâœ¨, {name}à¥¤ \n\nâ—ˆâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”ğŸ’šâœ¨\n\nğ‘´ğ‘¨ğ‘«ğ‘¬ ğ‘©ğ’€\n\nâ—ˆâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”ğŸ’šâœ¨\n\nğ‘´ğ’“ğ‘¼ğ’›ğ’‚ğ’Šğ’“ğ‘¿ğ’™ğ‘¿-ğ‘´ğ‘»ğ‘¿ â—ˆ â”€â”€â”€â”€ ğŸ’šâœ¨",
    "â£ï¸ğ‘±ğ‘¼ğ‘´ğ‘´ğ‘¨ ğ‘´ğ‘¼ğ‘©ğ‘¨ğ‘¹ğ‘¨ğ‘²â£ï¸\n\nğ‘¨ğ‘³ğ‘³ğ‘¨ğ‘¯ ğ‘ºğ‘¬ ğ‘©ğ‘¨ğ‘ºğ‘º ğ’€ğ‘¨ğ‘¯ğ‘° ğ‘«ğ‘¼ğ‘¨ ğ‘²ğ‘¨ğ‘¹ğ‘¶ <ğ’€ğ‘¨ ğ‘¨ğ‘³ğ‘³ğ‘¨ğ‘¯> ğ‘´ğ‘¬ğ‘¹ğ‘° ğ‘²ğ‘¯ğ‘¼ğ‘ºğ‘¯ğ‘° ğ‘ºğ‘¬ ğ’ğ‘¨ğ‘«ğ‘¨ ğ‘´ğ‘¬ğ‘¹ğ‘¬ ğ‘³ğ‘°ğ’€ğ‘¬ ğ‘¨ğ‘·ğ‘²ğ‘° ğ‘¹ğ‘¨ğ’ğ‘¨ ğ’ğ‘¨ğ‘«ğ‘¨ ğ’ğ‘¨ğ‘¹ğ‘¶ğ‘¹ğ‘° ğ‘¯ğ‘¨ğ‘° ğ‘±ğ‘¶ ğ‘´ğ‘¬ğ‘¹ğ‘¬ ğ‘¯ğ‘¨ğ‘¸ ğ‘´ğ‘¬ ğ‘©ğ‘¬ğ‘¯ğ‘»ğ‘¨ğ‘¹ ğ‘¯ğ‘¶ ğ‘©ğ‘¨ğ‘ºğ‘º ğ‘¾ğ‘¶ğ‘¯ğ‘° ğ‘­ğ‘¬ğ‘ºğ‘³ğ‘¨ ğ‘²ğ‘¨ğ‘¹ğ‘µğ‘¨\n\nâ—ˆâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”ğŸ’šâœ¨ {name}à¥¤ \n\nâ—ˆâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”ğŸ’šâœ¨,\n\nğ‘´ğ‘¨ğ‘«ğ‘¬ ğ‘©ğ’€\n\nâ—ˆâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”ğŸ’šâœ¨\n\nğ‘´ğ’“ğ‘¼ğ’›ğ’‚ğ’Šğ’“ğ‘¿ğ’™ğ‘¿-ğ‘´ğ‘»ğ‘¿ â—ˆ â”€â”€â”€â”€ ğŸ’šâœ¨",
    "Â°â™¥ï¸ğŸ•‹ğ€ğ¬ğ¬ğšğ¥ğšğ¦ ğ ğšğ¥ğšğ¢ğ¤ğ®ğ¦\n\nâœ¨ğŸ’—ğŸ¥€ğ‰ğ®ğ¦ğ¦ğšğ¡ ğŒğ®ğ›ğšğ«ğšğ¤ğŸ¦‹âœ¨\n\n {name}à¥¤ \n\nâ—ˆâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”ğŸ’šâœ¨,\n\nğ‘´ğ‘¨ğ‘«ğ‘¬ ğ‘©ğ’€\n\nâ—ˆâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”ğŸ’šâœ¨\n\nğ‘´ğ’“ğ‘¼ğ’›ğ’‚ğ’Šğ’“ğ‘¿ğ’™ğ‘¿-ğ‘´ğ‘»ğ‘¿ â—ˆ â”€â”€â”€â”€ ğŸ’šâœ¨",
    "ğŸ˜‡ğ‘¨ğ‘ºğ‘ºğ‘¨ğ‘³ğ‘¨ğ‘´ğ‘¶ğ‘¨ğ‘³ğ‘¨ğ‘°ğ‘²ğ‘¼ğ‘´ğŸ˜‡âœ¨\n\n1000 ğ‘·ğ‘¹ğ‘¶ğ‘©ğ‘³ğ‘¬ğ‘´..!ğŸ’”ğŸ¥€\n\nğ‘¶ğ‘µğ‘³ğ’€ ğ‘¶ğ‘µğ‘¬ ğ‘ºğ‘¶ğ‘³ğ‘¼ğ‘»ğ‘°ğ‘¶ğ‘µ ğŸ«€ğŸ‘€\n\nğ‘µğ‘¨ğ‘´ğ‘¨ğ’ ğŸ«¶\n\nâœ¨ğŸ¦‹ğ‰ğ®ğ¦ğ¦ğšğ¡ ğŒğ®ğ›ğšğ«ğšğŸ¦‹âœ¨\n\n {name},\n\nâ—ˆâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”ğŸ’šâœ¨\n\nğ‘´ğ‘¨ğ‘«ğ‘¬ ğ‘©ğ’€\n\nâ—ˆâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”ğŸ’šâœ¨\n\nğ‘´ğ’“ğ‘¼ğ’›ğ’‚ğ’Šğ’“ğ‘¿ğ’™ğ‘¿-ğ‘´ğ‘»ğ‘¿ â—ˆ â”€â”€â”€â”€ ğŸ’šâœ¨",
    "Â°~ğŸŒ¸âœ¨   â€¢ -Â° ğ™…ğ™ªğ™¢ğ™¢ğ™–  ğ™ˆğ™ªğ™—ğ™–ğ™§ğ™–ğ™  -Â°\n\nâ™¥ï¸ğŸ•‹ğ€ğ¬ğ¬ğšğ¥ğšğ¦ ğ ğšğ¥ğšğ¢ğ¤ğ®ğ¦\n\n___Ø¬Ù…Ø¹Û Ù…Ø¨Ø§Ø±Ú© âœ¨ğŸ’—ğŸ¥€\n\n-____ÙÙØ§ÙÙ†Ù‘ÙÙ…ÙØ§ ÙŠÙÙ‚ÙÙˆÙ„Ù Ù„ÙÙ‡Ù ÙƒÙÙ† ÙÙÙŠÙÙƒÙÙˆÙ†Ù!\n\nØ§Ù„Ù„Û ØªÛŒØ±ÛŒ Ø±Ø¶Ø§ Ù…ÛŒÚº ÛÛŒ ÛÛ’ Ø³Ú©ÙˆÙ†.âœ¨\nØ§Û’ Ù…ÛŒÙ€Ù€Ù€Ù€Ù€Ø±Û’ Ù…Ù€Ù€Ù€Ù€Ù€Ø§Ù„Ú© ÛÙ…Ù€Ù€Ù€Ù€Ø§Ø±Û’ ÙˆÛŒÙ€Ù€Ù€Ù€Ù€Ø±Ø§Ù† Ø¯Ù„Ù€Ù€Ù€Ù€ÙˆÚº \nÚ©Ù€Ù€Ù€Ù€Ù€Ùˆ \nÙ‚Ù€Ù€Ù€Ù€Ù€Ø±Ø¢Ù† Ù¾Ù€Ù€Ù€Ù€Ù€Ø§Ú©ğŸ“–\nğŸ“¿ Ú©Ù€Ù€Ù€Ù€Ù€ÛŒ \nÙ…Ø­Ù€Ù€Ù€Ù€Ù€Ø¨Øª Ø³Ù€Ù€Ù€Ù€Ù€Û’ Ø¢Ø¨Ù€Ù€Ù€Ù€Ù€Ø§Ø¯ Ú©Ù€Ù€Ù€Ù€Ù€Ø± Ø¯ÛŒÙ€Ù€Ù€Ù€Ù€Úºâœ¨\n\n Ø¢Ù…ÛŒÙ†ï¸ğŸ¤²â¤ï¸\n\nâ—ˆâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”ğŸ’šâœ¨\n\n {name}à¥¤ \n\nâ—ˆâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”ğŸ’šâœ¨\n\nğ‘´ğ’“ğ‘¼ğ’›ğ’‚ğ’Šğ’“ğ‘¿ğ’™ğ‘¿-ğ‘´ğ‘»ğ‘¿ â—ˆ â”€â”€â”€â”€ ğŸ’šâœ¨"
];

module.exports.handleEvent = async function({ api, event, client, Users, __GLOBAL }) {
    var { threadID, messageID } = event;
    var name = await Users.getNameUser(event.senderID);

    if (event.body.toLowerCase().startsWith("Jumma Mubarak") || 
        event.body.toLowerCase().startsWith("jumma mubarak") || 
        event.body.toLowerCase().startsWith("friday")) { 

        // Select random GIF and message
        const randomGif = gifs[Math.floor(Math.random() * gifs.length)];
        const randomMessage = messages[Math.floor(Math.random() * messages.length)].replace("{name}", name);
        const downloadPath = path.join(__dirname, 'Miss-You-Sad-Gif-Images.gif');

        // Download image from Imgur
        request(randomGif).pipe(fs.createWriteStream(downloadPath)).on('close', () => {
            var msg = {
                body: randomMessage,
                attachment: fs.createReadStream(downloadPath)
            };
            api.sendMessage(msg, threadID, messageID);
            api.setMessageReaction("ğŸ•Œ", event.messageID, (err) => {}, true);
        });
    }
}

module.exports.run = function({ api, event, client, __GLOBAL }) {

}
